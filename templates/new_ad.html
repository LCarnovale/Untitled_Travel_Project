{% extends "base.html" %}
{% block head %}
	<title>Post Accommodation</title>
	<style>#map {
        height: 400px;
		width: 400px;
		margin-left: auto;
		margin-right: auto;
      }</style>
{% endblock %}

{% block content %}
	<link rel="stylesheet" href = "{{url_for('static',filename = 'formstep.css')}}">
	<h2> Please enter the details of your accommodation: </h2>
	<form name='post_ad' id = "regForm" method='POST'>
		<div class = "tab">Place Details
			<p><input name = "acc_name" placeholder = "Name" class = "required"></p>
			<p><input name = "acc_addr" placeholder = "Address" class = "required"></p>
			<p><input name = "acc_nbed" placeholder = "Beds" class = "required" type = number></p>
			<p><input name = "acc_nbath" placeholder = "Bathrooms" class = "required" type = number></p>
			<p><input name = "acc_details" placeholder = "Additional details"></p>		
		</div>
		<div class = "tab">Location Details
			<p><input name = "acc_location" id = "hiddenlocation" class = "required" type = "hidden"></p>
			<div id="map"></div>
		</div>		
		<div class = "tab">Owner Details
			<p><input name = "own_name" placeholder = "Name" class = "required"></p>
			<p><input name = "own_email" placeholder = "Email" type = "email" class = "required"></p>
			<p><input name = "own_phone" placeholder = "Mobile" class = "required"></p>
			<p><input name = "own_details" placeholder = "Owner details"></p>
		</div>
		<div class = "tab">Stay Details
			<p><input name = "price" placeholder = "Price" class = "required" type = number step = 0.01></p>
			<p><input name = "avail_start" placeholder = "Start Availability" class = "required" type = date></p>
			<p><input name = "avail_end" placeholder = "End Availability" class = "required" type = date></p>
			<p><input name = "min_stay" placeholder = "Min. Stay" type = number></p>
			<p><input name = "max_stay" placeholder = "Max. Stay" type = number></p>
			<p><input name = "stay_details" placeholder = "Additional Details"></p>
		</div>
		
		<div style="overflow:auto;">
			<div style="float:right;">
				<button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
				<button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
			</div>
		</div>
		<div style="text-align:center;margin-top:40px;">
			<span class="step"></span>
			<span class="step"></span>
			<span class="step"></span>
			<span class="step"></span>
		</div>
	</form>
	<script>
      var map;
	  var markerlist = [];
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -33.91538902145825 , lng: 151.11207767686824},
          zoom: 13
        });
		google.maps.event.addListener(map, 'click', function( event ){
			document.getElementById("hiddenlocation").value = event.latLng.lat()+", "+event.latLng.lng();
			
			for (i = 0;i<markerlist.length;i++){
				markerlist[i].setMap(null);
			}
			var marker = new google.maps.Marker({position: event.latLng, map: map});
			markerlist.push(marker)
});
			
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDwnoTrb4bDrnE2qSu7q1HiS0pWCsCJS7g&callback=initMap"
    async defer></script>
	<script type =text/javascript src = "{{ url_for('static',filename = 'formstep.js')}}"></script>
{% endblock %}
