{% extends "base.html" %}
{% block head %}
    <title>(STUB) Search Results</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='search_results.css') }}">
{% endblock %}

{% block content %}
    <h2> Here are the search results: </h2>
    <br>
    {% if results %}
<div class="grid">
        {% for result in results %}
            <div class="flip-card">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <h1 style="font-size: 35px;"> {{result.name}} </h1>
                        {% if result.get_images() %}
                            {% for img in result.get_images() %}
                                <div class="mySlides fade">
                                <img src="{{img}}" class="img">
                                </div>
                            {% endfor %}
                        {%endif%}
                    </div>
                    <div class="flip-card-back">
                        <p> {{result.details}}</p>
                        <p>Price {{result.rate}} / night</p>
                        <p> Min nights: {{result.min_stay}}, Max nights: {{result.max_stay}}</p>
                        <p> {{result.address.street_address}}</p>
                        <p><a href = "/book/{{result.id}}"> See more info </a></p>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    {% else %}
        <p class = "no_results"> Sorry, there were no places matching your search. Please try again. </p>
    {% endif %}
<script>
var slideIndex = 0;
showSlides();

function showSlides() {
  var i;
  var slides = document.getElementsByClassName("mySlides");
  for (i = 0; i < slides.length; i++) {
    slides[i].style.display = "none";
  }
  slideIndex++;
  if (slideIndex > slides.length) {slideIndex = 1}
  slides[slideIndex-1].style.display = "block";
  setTimeout(showSlides, 1500); // Change image every 1.5 seconds
}
</script>
{% endblock %}
